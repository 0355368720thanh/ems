Index: app/src/main/java/com/example/expensemanagementstudent/db/UserDB.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.expensemanagementstudent.db;\r\n\r\nimport android.content.ContentValues;\r\nimport android.content.Context;\r\nimport android.database.Cursor;\r\nimport android.database.sqlite.SQLiteDatabase;\r\nimport android.database.sqlite.SQLiteOpenHelper;\r\nimport android.os.Build;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.annotation.RequiresApi;\r\n\r\nimport java.time.ZonedDateTime;\r\nimport java.time.format.DateTimeFormatter;\r\n\r\n//tao bang du lieu trong class nay\r\npublic class UserDB  extends SQLiteOpenHelper {\r\n\r\n    public static final String DB_NAME = \"users_db\";\r\n    public static final int DB_VERSION = 1;\r\n    public static final String TABLE_NAME = \"users\";\r\n\r\n    //khai bao cac cot trong bang du lieu\r\n    public static final String ID_COL = \"id\";\r\n    public static final String USERNAME_COL = \"username\";\r\n    public static final String EMAIL_COL = \"email\";\r\n    public static final String ADDRESS_COL = \"address\";\r\n    public static final String PASS_COL = \"password\";\r\n    public static final String GENDER_COL = \"gender\";\r\n    public static final String CREATED_COL = \"created_at\";\r\n    public static final String UPDATED_COL = \"updated_at\";\r\n\r\n    public UserDB(@Nullable Context context) {\r\n        super(context, DB_NAME, null, DB_VERSION);\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\r\n        //tao bang du lieu voi sqlite\r\n        String query = \"CREATE TABLE \" + TABLE_NAME + \" (\"\r\n                + ID_COL + \" INTEGER PRIMARY KEY AUTOINCREMENT, \"\r\n                + USERNAME_COL + \" VARCHAR(60) NOT NULL, \"\r\n                + PASS_COL + \" VARCHAR(255) NOT NULL, \"\r\n                + EMAIL_COL + \" VARCHAR(60) NOT NULL, \"\r\n                + GENDER_COL + \" VARCHAR(60) NOT NULL, \"\r\n                + ADDRESS_COL + \" TEXT, \"\r\n                + CREATED_COL + \" DATETIME, \"\r\n                + UPDATED_COL + \" DATETIME\"\r\n                + \")\";\r\n        sqLiteDatabase.execSQL(query);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {\r\n        //xoa bang du lieu cu\r\n        sqLiteDatabase.execSQL(\"DROP TABLE IF EXISTS \" + TABLE_NAME);\r\n        onCreate(sqLiteDatabase);\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    public long addNewAccountUser(String username, String password, String email, String gender, String address){\r\n\r\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(\"yyyy/MM/dd HH:mm:ss\");\r\n        ZonedDateTime now = ZonedDateTime.now();\r\n        String created_at = dtf.format(now);\r\n\r\n        SQLiteDatabase sqLiteDatabase = this.getWritableDatabase();\r\n        ContentValues values = new ContentValues();\r\n        values.put(USERNAME_COL, username);\r\n        values.put(PASS_COL, password);\r\n        values.put(EMAIL_COL, email);\r\n        values.put(GENDER_COL, gender);\r\n        values.put(ADDRESS_COL, address);\r\n        values.put(CREATED_COL, created_at);\r\n\r\n        long result = sqLiteDatabase.insert(TABLE_NAME, null, values);\r\n        sqLiteDatabase.close();\r\n        return result;\r\n    }\r\n\r\n    public String checkLogin(String username, String password) {\r\n        SQLiteDatabase sqLiteDatabase = this.getReadableDatabase();\r\n\r\n        // Kiểm tra xem tên người dùng đã tồn tại chưa\r\n        String userQuery = \"SELECT * FROM \" + TABLE_NAME + \" WHERE \" + USERNAME_COL + \" = ?\";\r\n        Cursor userCursor = sqLiteDatabase.rawQuery(userQuery, new String[]{username});\r\n\r\n        if (userCursor.getCount() == 0) {\r\n            userCursor.close();\r\n            sqLiteDatabase.close();\r\n            return \"USER_NOT_FOUND\"; // Người dùng không tồn tại\r\n        }\r\n\r\n        // Kiểm tra mật khẩu\r\n        String loginQuery = \"SELECT * FROM \" + TABLE_NAME + \" WHERE \" + USERNAME_COL + \" = ? AND \" + PASS_COL + \" = ?\";\r\n        Cursor loginCursor = sqLiteDatabase.rawQuery(loginQuery, new String[]{username, password});\r\n\r\n        boolean isValid = loginCursor.getCount() > 0;\r\n        loginCursor.close();\r\n        sqLiteDatabase.close();\r\n\r\n        if (!isValid) {\r\n            return \"WRONG_PASSWORD\"; // Sai mật khẩu\r\n        }\r\n\r\n        return \"LOGIN_SUCCESS\"; // Đăng nhập thành công\r\n    }\r\n    public boolean isEmailExists(String email) {\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n        String query = \"SELECT * FROM Users WHERE email = ?\";\r\n        Cursor cursor = db.rawQuery(query, new String[]{email});\r\n        boolean exists = cursor.getCount() > 0;\r\n        cursor.close();\r\n        db.close();\r\n        return exists;\r\n    }\r\n\r\n\r\n    public boolean resetPassword(String email, String newPassword) {\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues values = new ContentValues();\r\n        values.put(\"password\", newPassword);\r\n        int rows = db.update(\"users\", values, \"email = ?\", new String[]{email});\r\n        db.close();\r\n        return rows > 0;\r\n    }\r\n    public boolean isUsernameExists(String username) {\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n        Cursor cursor = db.rawQuery(\"SELECT * FROM Users WHERE username = ?\", new String[]{username});\r\n        boolean exists = cursor.getCount() > 0;\r\n        cursor.close();\r\n        db.close();\r\n        return exists;\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/expensemanagementstudent/db/UserDB.java b/app/src/main/java/com/example/expensemanagementstudent/db/UserDB.java
--- a/app/src/main/java/com/example/expensemanagementstudent/db/UserDB.java	
+++ b/app/src/main/java/com/example/expensemanagementstudent/db/UserDB.java	
@@ -16,7 +16,7 @@
 //tao bang du lieu trong class nay
 public class UserDB  extends SQLiteOpenHelper {
 
-    public static final String DB_NAME = "users_db";
+    public static final String DB_NAME = "ExpenseManagement.db";
     public static final int DB_VERSION = 1;
     public static final String TABLE_NAME = "users";
 
